<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V-Ges</title>
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/viges-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
     <style>
        /* Mengatur agar video tidak bisa di-fullscreen secara default oleh browser */
        video::-webkit-media-controls-fullscreen-button {
            display: none !important;
        }
        video::-webkit-media-controls-play-button {
            display: none !important;
        }
        video::-webkit-media-controls-timeline {
            display: none !important;
        }
        video::-webkit-media-controls-current-time-display {
            display: none !important;
        }
        video::-webkit-media-controls-time-remaining-display {
            display: none !important;
        }
        video::-webkit-media-controls-mute-button {
            display: none !important;
        }
        video::-webkit-media-controls-volume-slider {
            display: none !important;
        }
        /* Jika Anda ingin menyembunyikan semua kontrol bawaan */
        video::-webkit-media-controls {
            display: none !important;
        }
        video::controls {
             display: none !important;
        }
    </style>
</head>
<body>
    <div class="tiktok-container">
        <header class="tiktok-header">
            <div class="logo">
                <h1>ViGes</h1>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Cari...">
                <i class="fas fa-search"></i>
            </div>
        </header>

        <main class="tiktok-main-content">
            <div class="video-feed">
                <div class="video-item">
                    <div class="video-player">
                        <div class="wistia_responsive_padding" style="padding:177.78% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><iframe src="https://fast.wistia.net/embed/iframe/etopxlq5gk?web_component=true&seo=true"
                                    title="Kegiatan Jual Barang Bekas 2024 Video"
                                    allow="fullscreen" allowtransparency="true" frameborder="0" scrolling="no"
                                    class="wistia_embed" name="wistia_embed_1" id="wistia_embed_etopxlq5gk"></iframe></div></div>
                    </div>
                    <div class="video-details">
                        <div class="user-info">
                            <div class="username-and-desc">
                                <h3>Kegiatan Jualan BABE 2024</h3>
                                <p>Jual barang bekas layak pakai Anda di Kegiatan Jualan BABE! #tutorial #coffee</p>
                                <p class="audio-info"><i class="fas fa-music"></i> Kopi Enak</p>
                            </div>
                        </div>
                    </div>
                    <div class="interaction-sidebar">
                        <div class="interaction-button profile-circle"><img src="https://via.placeholder.com/30" alt="User Profile"></div>
                        <div class="interaction-button"><div class="icon">‚ù§Ô∏è</div><span>1.5M</span></div>
                        <div class="interaction-button"><div class="icon">üí¨</div><span>70K</span></div>
                        <div class="interaction-button"><div class="icon">üîó</div><span>30K</span></div>
                    </div>
                </div>
                <div class="video-item">
                    <div class="video-player">
                        <div class="wistia_responsive_padding" style="padding:177.78% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><iframe src="https://fast.wistia.net/embed/iframe/cnb58awg7w?web_component=true&seo=true"
                                    title="Berbagi Makanan Nasi Box Bulan Juni Video"
                                    allow="fullscreen" allowtransparency="true" frameborder="0" scrolling="no"
                                    class="wistia_embed" name="wistia_embed_2" id="wistia_embed_cnb58awg7w"></iframe></div></div>
                    </div>
                    <div class="video-details">
                        <div class="user-info">
                            <div class="username-and-desc">
                                <h3>Berbagi Nasi Box</h3>
                                <p>Bagi-bagi nasi box di bulan juni #tutorial #coffee</p>
                                <p class="audio-info"><i class="fas fa-music"></i> Kopi Enak</p>
                            </div>
                        </div>
                    </div>
                    <div class="interaction-sidebar">
                        <div class="interaction-button profile-circle"><img src="https://via.placeholder.com/30" alt="User Profile"></div>
                        <div class="interaction-button"><div class="icon">‚ù§Ô∏è</div><span>1.5M</span></div>
                        <div class="interaction-button"><div class="icon">üí¨</div><span>70K</span></div>
                        <div class="interaction-button"><div class="icon">üîó</div><span>30K</span></div>
                    </div>
                </div>
                <div class="video-item">
                    <div class="video-player">
                        <div class="wistia_responsive_padding" style="padding:183.78% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><iframe src="https://fast.wistia.net/embed/iframe/b9seo14989?web_component=true&seo=true" title="Berbagi Nasi Box Mei 2025 Video" allow="fullscreen" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed_3" id="wistia_embed_b9seo14989" width="100%" height="100%"></iframe></div></div>
                    </div>
                    <div class="video-details">
                        <div class="user-info">
                            <div class="username-and-desc">
                                <h3>@another_creator</h3>
                                <p>Tutorial singkat bikin kopi ini! #tutorial #coffee</p>
                                <p class="audio-info"><i class="fas fa-music"></i> Kopi Enak</p>
                            </div>
                        </div>
                    </div>
                    <div class="interaction-sidebar">
                        <div class="interaction-button profile-circle"><img src="https://via.placeholder.com/30" alt="User Profile"></div>
                        <div class="interaction-button"><div class="icon">‚ù§Ô∏è</div><span>1.5M</span></div>
                        <div class="interaction-button"><div class="icon">üí¨</div><span>70K</span></div>
                        <div class="interaction-button"><div class="icon">üîó</div><span>30K</span></div>
                    </div>
                </div>
                <div class="video-item">
                    <div class="video-player">
                        <div class="wistia_responsive_padding" style="padding:177.78% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><iframe src="https://fast.wistia.net/embed/iframe/reya71g9t6?web_component=true&seo=true" title="Makan Gratis Video" allow="fullscreen" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed_4" id="wistia_embed_reya71g9t6" width="100%" height="100%"></iframe></div></div>
                    </div>
                    <div class="video-details">
                        <div class="user-info">
                            <div class="username-and-desc">
                                <h3>@another_creator</h3>
                                <p>Tutorial singkat bikin kopi ini! #tutorial #coffee</p>
                                <p class="audio-info"><i class="fas fa-music"></i> Kopi Enak</p>
                            </div>
                        </div>
                    </div>
                    <div class="interaction-sidebar">
                        <div class="interaction-button profile-circle"><img src="https://via.placeholder.com/30" alt="User Profile"></div>
                        <div class="interaction-button"><div class="icon">‚ù§Ô∏è</div><span>1.5M</span></div>
                        <div class="interaction-button"><div class="icon">üí¨</div><span>70K</span></div>
                        <div class="interaction-button"><div class="icon">üîó</div><span>30K</span></div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="tiktok-footer-nav">
            <div class="nav-item active">
                <i class="fas fa-home"></i>
                <span>Beranda</span>
            </div>
            <div class="nav-item">
                <i class="fas fa-compass"></i>
                <span>Jelajahi</span>
            </div>
            <div class="nav-item add-button">
                <i class="fas fa-plus"></i>
            </div>
            <div class="nav-item">
                <i class="fas fa-inbox"></i>
                <span>Kotak Masuk</span>
            </div>
            <div class="nav-item">
                <i class="fas fa-user"></i>
                <span>Profil</span>
            </div>
        </footer>
    </div>
    <script src="https://fast.wistia.com/assets/external/E-v1.js" async></script>
    <script>
        // Inisialisasi Wistia API secara asynchronous
        window._wq = window._wq || [];

        // Pastikan DOM sudah dimuat sebelum menjalankan skrip
        document.addEventListener('DOMContentLoaded', () => {
            const videoItems = document.querySelectorAll('.video-item');
            const mainContent = document.querySelector('.tiktok-main-content');
            let activeVideoPlayer = null; // Menyimpan objek pemutar Wistia yang sedang aktif

            // Fungsi untuk memutar video Wistia dan mematikannya
            function playAndMuteWistiaVideo(iframeId) {
                _wq.push({
                    id: iframeId,
                    onReady: function(video) {
                        video.play();
                        activeVideoPlayer = video; // Simpan referensi ke pemutar yang aktif
                        console.log(`Playing and muting video: ${iframeId}`);
                    }
                });
            }

            // Fungsi untuk menghentikan dan mereset video Wistia
            function pauseAndResetWistiaVideo(iframeId) {
                _wq.push({
                    id: iframeId,
                    onReady: function(video) {
                        video.pause();
                        video.time(0); // Atur ulang waktu video ke awal
                        console.log(`Pausing and resetting video: ${iframeId}`);
                    }
                });
            }

            // Opsi untuk Intersection Observer
            const observerOptions = {
                root: mainContent, // Element yang akan menjadi viewport (scroll container)
                rootMargin: '0px',
                threshold: 0.7 // Video akan dianggap 'terlihat' jika 70% dari video berada dalam viewport
            };

            // Buat Intersection Observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const videoPlayerIframe = entry.target.querySelector('.video-player iframe');
                    if (!videoPlayerIframe) return; // Pastikan ada iframe di dalam video-item

                    const currentVideoId = videoPlayerIframe.id;

                    if (entry.isIntersecting) {
                        // Jika video ini masuk ke dalam viewport (terlihat)
                        if (activeVideoPlayer && activeVideoPlayer.hashedId() !== currentVideoId) {
                            // Jika ada video lain yang sedang aktif, jeda dan reset video tersebut
                            pauseAndResetWistiaVideo(activeVideoPlayer.hashedId());
                        }
                        // Putar video yang baru terlihat dan set sebagai aktif
                        playAndMuteWistiaVideo(currentVideoId);
                    } else {
                        // Jika video ini keluar dari viewport (tidak terlihat)
                        if (activeVideoPlayer && activeVideoPlayer.hashedId() === currentVideoId) {
                            // Jika video yang keluar adalah video yang sedang aktif, jeda dan reset video tersebut
                            pauseAndResetWistiaVideo(currentVideoId);
                            activeVideoPlayer = null; // Reset activeVideoPlayer
                        }
                    }
                });
            }, observerOptions);

            // Mulai mengamati setiap elemen video-item
            videoItems.forEach(item => {
                observer.observe(item);
            });

            // Opsional: Putar video pertama secara otomatis saat halaman pertama kali dimuat
            // Ini untuk memastikan ada video yang langsung diputar tanpa perlu scroll
            if (videoItems.length > 0) {
                const firstVideoPlayerIframe = videoItems[0].querySelector('.video-player iframe');
                if (firstVideoPlayerIframe) {
                    playAndMuteWistiaVideo(firstVideoPlayerIframe.id);
                }
            }
        });
    </script>
</body>
</html>
